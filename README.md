# STX-WindFlow - Renewable Energy Asset Management Smart Contract

## Overview
This Clarity smart contract provides a decentralized system for managing renewable energy assets on the Stacks blockchain. It enables asset registration, share-based ownership, revenue distribution, and governance mechanisms.

## Features
- **Asset Registration**: Register renewable energy assets with details such as type, location, and share structure.
- **Share-Based Ownership**: Investors can purchase shares in assets, enabling decentralized ownership.
- **Revenue Distribution**: Revenue generated by assets is distributed proportionally to shareholders.
- **Governance System**: Shareholders can vote on asset-related proposals, ensuring democratic decision-making.
- **Asset Metrics Tracking**: Operational and financial performance metrics are recorded and maintained.
- **Error Handling**: Comprehensive error codes ensure robust contract interactions.

## Constants and Configuration
- `CONTRACT-OWNER`: The deployer of the contract.
- `MIN-INVESTMENT`: Minimum STX required for asset registration.
- `SHARE-SCALE`: Determines share value precision.
- `VOTE-THRESHOLD`: 75% approval required for proposal acceptance.
- `MAINTENANCE-WINDOW`: Maintenance period in blockchain blocks (~24 hours).

## Data Structures

### Asset Structure
Stores information about registered assets:
- `name`, `asset-type`, `total-shares`, `available-shares`, `share-price`
- `total-revenue`, `revenue-per-share`, `status`, `location`, `timestamps`

### Ownership Structure
Tracks shareholder ownership:
- `shares`, `revenue-claimed`, `last-claim-height`, `voting-power`

### Asset Metrics
Tracks performance metrics:
- `energy-produced`, `operational-hours`, `maintenance-cost`
- `efficiency-rating`, `carbon-offset`, `peak-output`, `lifetime-roi`

### Governance Structure
Defines governance parameters for assets:
- `min-quorum`, `vote-period`, `min-vote-threshold`, `cooldown-period`

### Proposal System
Manages governance proposals:
- `proposal-type`, `description`, `amount`, `votes-for`, `votes-against`
- `status`, `execution-delay`, `quorum-reached`

## Functions

### Public Functions

#### Register Asset
Registers a new renewable energy asset.
```clarity
(register-asset (name string) (asset-type string) (total-shares uint) (share-price uint) (latitude int) (longitude int))
```
- Validates asset details and creates an entry in the `assets` map.

#### Purchase Shares
Allows investors to purchase shares in an asset.
```clarity
(purchase-shares (asset-id uint) (share-count uint))
```
- Transfers STX from the investor to the contract.
- Updates ownership records and voting power.

#### Distribute Revenue
Distributes revenue among shareholders.
```clarity
(distribute-revenue (asset-id uint) (amount uint))
```
- Transfers STX from the contract owner to shareholders.

## Error Handling
The contract includes comprehensive error codes for transaction validation:
- `ERR-NOT-AUTHORIZED (u401)`: Unauthorized access.
- `ERR-ASSET-EXISTS (u402)`: Asset already exists.
- `ERR-ASSET-NOT-FOUND (u404)`: Asset does not exist.
- `ERR-INSUFFICIENT-SHARES (u405)`: Not enough available shares.
- `ERR-INVALID-AMOUNT (u403)`: Invalid transaction amount.
- `ERR-TRANSFER-FAILED (u406)`: STX transfer failed.
- `ERR-INSUFFICIENT-QUORUM (u417)`: Not enough votes for governance decision.

## Governance Mechanism
- Shareholders can vote on proposals for asset management decisions.
- Governance settings ensure fair decision-making through quorum and voting thresholds.
- Proposals include asset upgrades, revenue distribution, and operational decisions.

## Deployment & Usage
1. **Deploy the contract** using Clarity on Stacks blockchain.
2. **Register assets** with valid details.
3. **Allow investors to purchase shares** for ownership.
4. **Enable governance through proposals** and voting mechanisms.
5. **Distribute revenue** proportionally among shareholders.

